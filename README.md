# lifeChallengeBot
Игровой телеграм бот

# Для чего ?
Суть игры данного бота в том, что группы в телеграмме, в которых находятся люди, смогут 
создавать друг другу испытания, которые они должны будут выполнять. За выполнение\не выполнение заданий
предполагается награда\штраф. 

# Архитектура
![image](https://github.com/wanna-beat-by-bit/lifeChallengeBot/assets/71206074/eb782cf0-21af-4f49-98ef-45c965542424)


Архитектура сервиса бота состоит из нескольких элементов, которые будут объяснены далее:
### Client
Отвечает за транспортировку данных от бота до телеграмма и наоборот. В основе лежит http
пакет языка Go, которые позволит формировать GET http запрос с его последующей отправкой, а также принимать
POST запросы с их последующим декодирование в объекты.

### Fetcher
Отвечает за принятия обновлений из чатов с ботом. В данный элемент включена зависимость от клиента, 
тем самым он будет производить запросы, используя его. При принятии обновлений конвертирует их в 
ивенты. Обычно, ивенты, это стандартный тип данных, который присутсвует в мессенджерах, поэтому
важно ковенртировать обновелния телеграмма в ивенты.

### Processor
Процессор нужен для обработки получаемых ивентов из чатов с ботом. В нем содержится основная бизнес логика
приложения.

### Consumer
Является точкой запуска бота, и непрервыно получает ивенты из чатов при помощи Fetcher, а затем обрабатывает
их при помощи Processor. Consumer занимает одну горутину для своей работы.

### Watcher
Также имеется данный элемент, который нужен для отслеживания зарегистрированных испытаний. Если случается
дедлайн испытания, то данный элемент должен отослать пользователю, что испытание закончено. Чтобы 
не было много обращений в базу данных за мониторингом дедлайна испытания, производится хэширование 
первых 5-и ближайших испытаний, а в обращение в базу данных будет только тогда, когда Processor
зарегистрирует новое испытание, и положит его в базу данных. Тогда он при помощи канала сообщит 
Watcher, что нужно обновить актуальность отслеживаемых испытаний, так как могло появится испытание, которое
имеет более ранний срок, чем уже отслеживаемые.

# Запуск проекта
Для запуска проекта был создан Makefile, с помощью чего, нужно прописать make build, а затем make run, но также
не забить вместе с make run написать токен бота.
__Пример__:
```
make build
make run TOKEN=1234567
```
